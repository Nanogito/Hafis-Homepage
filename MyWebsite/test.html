<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Hafis js tests</title>

	<script
		src="lib/require-1.0.7.js"
		XXsrc="lib/require-2.3.5.min.js"
	></script>
	<script>
	require.config({
		baseUrl: "./app",
		paths: {
			"jquery":
				/* local std jquery */ "../lib/jquery-1.11.0.min", 
				
				/* 1&1 version of jquery | TODO: it requires some "jimdoData" thingy... */
				// /* local */ "../lib/jquery-1.11.0.min+sizzle-1.10.16",
				// /* from CDN */ "//cdn.eu.mywebsite-editor.com/app/cdn/min/group/web",
			"qunit": "../lib/qunit-2.6.1",
		},
		waitSeconds: 1 // secs until we give up loading a module
	});
	</script>
	<link rel="stylesheet" href="./lib/qunit-2.6.1.css">

</head>
<body>
<div id="qunit"></div>

	
	<script>require(
		["jquery", "qunit", "urlParams", "detect-mode"], 
		($, QUnit, urlParams, mode) => 
	{
		'use strict';
		const { test } = QUnit;
		
		QUnit.module("urlParams", () => {
			
			test("with no arg", assert => {
				const act = urlParams();
				const exp = urlParams(window.location);
				assert.propEqual(act, exp,
					"gives urlParams of window.location");
			});
			test("no query string in URL yields empty object", assert => {
				const wl = window.location;
				const exp = {};
				let url;
				
				url = new URL(wl.origin + wl.pathname);
				assert.propEqual(urlParams(url), exp, 
					"without hash #: " + url);
				url = new URL(wl.origin + wl.pathname + "#foo");
				assert.propEqual(urlParams(url), exp, 
					"with a hash #: " + url);
			});
		});
		
		QUnit.module("detect-mode", () => {
		});
		
		QUnit.module("head.html", () => {
		
			test("structure", assert => {
				assert.ok(1);
			});
		}); // end module head.html
		QUnit.start();
	});</script>
	
	
<script>
/*
	'use strict';
	const $ = jQuery;
	const { test } = QUnit;
	
	QUnit.module("head.html", () => {
		
		test("structure", assert => {
			assert.timeout(500);
			let done = assert.async(1);
			let div = $("<div>");
			div.load("./head.html?debug", (response, status, jqXHR) => {
				jqXHR.fail(jqXHR => {
					const headers = jqXHR.getAllResponseHeaders();
					assert.ok(false, "could not load head.html: "
						+ QUnit.dump.parse({ response, status, headers }));
					done();
				}).done(jqXHR => {
					const tag = div.find("> *");
					assert.equal(tag.length, 1, "should contain one tag");
					assert.equal(tag[0].nodeName, "SCRIPT", "should be <script> tag");
					assert.equal(tag.attr("type"), "text/javascript", "<script type=?>");
					
					let js = $.trim(tag.text());
					let xBegin = "//<![CDATA[";
					let xEnd   = "//]]>";
					assert.equal(js.substr(0, xBegin.length), xBegin, 'should start with "' 
						+ xBegin + '": "' + js.substr(0, 20) + '..."');
					assert.equal(js.substr(-xEnd.length), xEnd, 'should end with "' 
						+ xEnd + '": "...' + js.substr(-20) + '"');
					
					
					//let code = js.substring(xBegin.length, js.length - xEnd.length);
					//let f = new Function("'use strict'; =qumbl");
					////let x = f(); // actually evaluates it
					
					
					
					////$("body").append(div); // actually evaluates it
					//console.log({x: tag[0]});
					//assert.equal(typeof JSON.stringify, "function");
					
					done();
				})
			})
		});
		
		
		test("second test", assert => {
			assert.ok(1);
		});
	});
	
	QUnit.module("next module	", () => {
		test("first test", assert => {
			assert.ok(1);
		});
	});
*/
</script>

</body>
</html>